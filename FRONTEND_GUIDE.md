# 前端使用指南

## 概述

MCP Adapter 前端是一个现代化的单页应用（SPA），提供直观的界面来管理应用、自定义类型和接口。

## 功能特性

### 1. 应用管理
- ✅ 创建、查看、编辑、删除应用
- ✅ 支持多种协议（SSE, HTTP）
- ✅ 应用状态管理（启用/禁用）
- ✅ 应用路径配置

### 2. 自定义类型管理
- ✅ 创建可复用的数据类型
- ✅ 定义类型字段（name, type, required, description）
- ✅ 支持基本类型（string, number, boolean）
- ✅ 字段级别的必填验证
- ✅ 类型嵌套（未来支持）

### 3. 接口管理
- ✅ 创建 HTTP 接口
- ✅ 支持多种 HTTP 方法（GET, POST, PUT, DELETE, PATCH）
- ✅ 参数配置（name, type, location, required）
- ✅ 参数位置支持（query, header, body, path）
- ✅ 认证类型配置

## 界面布局

```
┌─────────────┬──────────────────────────────────┐
│             │                                  │
│  侧边栏     │         主内容区                 │
│             │                                  │
│  - 应用管理 │  ┌────────────────────────────┐ │
│  - 自定义类型│  │  页面标题和操作按钮        │ │
│  - 接口管理 │  └────────────────────────────┘ │
│  - 文档     │                                  │
│             │  ┌────────────────────────────┐ │
│  [当前应用] │  │  搜索和过滤                │ │
│             │  └────────────────────────────┘ │
│             │                                  │
│             │  ┌────────────────────────────┐ │
│             │  │  卡片网格                  │ │
│             │  │  ┌──────┐ ┌──────┐        │ │
│             │  │  │ 卡片 │ │ 卡片 │        │ │
│             │  │  └──────┘ └──────┘        │ │
│             │  └────────────────────────────┘ │
└─────────────┴──────────────────────────────────┘
```

## 使用流程

### 快速开始

1. **启动后端服务**
   ```bash
   go run main.go
   ```

2. **访问前端**
   打开浏览器访问 `http://localhost:8080`

3. **创建应用**
   - 点击侧边栏"应用管理"
   - 点击"创建应用"按钮
   - 填写应用信息（名称、路径、协议）
   - 点击"确认"

4. **选择当前应用**
   - 在侧边栏底部的下拉框中选择刚创建的应用
   - 这将作为后续操作的上下文

5. **创建自定义类型（可选）**
   - 点击侧边栏"自定义类型"
   - 点击"创建类型"按钮
   - 填写类型名称和描述
   - 添加字段（名称、类型、是否必填、描述）
   - 点击"确认"

6. **创建接口**
   - 点击侧边栏"接口管理"
   - 点击"创建接口"按钮
   - 填写接口基本信息
   - 添加参数定义
   - 点击"确认"

## 详细功能说明

### 应用管理

#### 创建应用
1. 点击"创建应用"按钮
2. 填写表单：
   - **应用名称**（必填）：应用的显示名称
   - **应用描述**：描述应用的功能和用途
   - **应用路径**（必填）：URL 路径标识，如 `my-api`
   - **协议类型**（必填）：选择 SSE 或 HTTP
3. 点击"确认"创建

#### 查看应用
- 点击应用卡片查看详细信息
- 显示应用的所有配置信息

#### 编辑应用
- 点击应用卡片上的"编辑"按钮
- 修改应用信息
- 点击"确认"保存

#### 删除应用
- 点击应用卡片上的"删除"按钮
- 确认删除操作
- ⚠️ 注意：删除应用会同时删除所有相关的接口和类型

### 自定义类型管理

#### 创建类型
1. 确保已选择当前应用
2. 点击"创建类型"按钮
3. 填写类型信息：
   - **类型名称**（必填）：如 `User`, `Article`
   - **类型描述**：描述类型的用途
4. 添加字段：
   - 点击"添加字段"按钮
   - 填写字段信息：
     - **字段名**：如 `id`, `name`, `email`
     - **字段类型**：string, number, boolean
     - **是否必填**：勾选复选框
     - **字段描述**：可选的描述信息
5. 点击"确认"创建

#### 示例：创建 User 类型
```
类型名称: User
类型描述: 用户信息

字段:
- id (number, 必填) - 用户ID
- name (string, 必填) - 用户名
- email (string) - 邮箱地址
- age (number) - 年龄
```

#### 查看类型
- 点击类型卡片查看详细信息
- 显示所有字段定义

#### 编辑类型
- 点击类型卡片上的"编辑"按钮
- 修改类型信息和字段
- 可以添加、删除、修改字段
- 点击"确认"保存

#### 删除类型
- 点击类型卡片上的"删除"按钮
- 确认删除操作
- ⚠️ 注意：如果类型被接口引用，将无法删除

### 接口管理

#### 创建接口
1. 确保已选择当前应用
2. 点击"创建接口"按钮
3. 填写接口信息：
   - **接口名称**（必填）：如 `GetUser`, `CreateArticle`
   - **接口描述**：描述接口的功能
   - **HTTP 方法**（必填）：GET, POST, PUT, DELETE, PATCH
   - **协议**：HTTP
   - **URL**（必填）：接口地址，如 `https://api.example.com/users`
   - **认证类型**：无认证、Bearer Token、Basic Auth
4. 添加参数：
   - 点击"添加参数"按钮
   - 填写参数信息：
     - **参数名**：如 `id`, `name`
     - **参数类型**：string, number, boolean
     - **参数位置**：query, header, body, path
     - **是否必填**：勾选复选框
5. 点击"确认"创建

#### 示例：创建 GetUser 接口
```
接口名称: GetUser
接口描述: 根据ID获取用户信息
HTTP 方法: GET
URL: https://api.example.com/users
认证类型: 无认证

参数:
- id (string, query, 必填) - 用户ID
- include_details (boolean, query) - 是否包含详细信息
```

#### 查看接口
- 点击接口卡片查看详细信息
- 显示所有参数定义

#### 编辑接口
- 功能开发中...

#### 删除接口
- 点击接口卡片上的"删除"按钮
- 确认删除操作

## UI 组件说明

### 卡片（Card）
- 用于展示应用、类型、接口的信息
- 支持悬停效果
- 包含操作按钮（编辑、删除）

### 模态框（Modal）
- 用于创建和编辑操作
- 支持表单验证
- 点击背景或关闭按钮可关闭

### Toast 通知
- 显示操作结果（成功、错误、警告、信息）
- 自动消失（3秒）
- 位于页面右上角

### 搜索栏
- 支持实时搜索（功能开发中）
- 位于页面顶部

## 快捷键

- `Esc` - 关闭模态框

## 浏览器支持

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 响应式设计

前端支持响应式布局，在不同设备上都能良好显示：

- **桌面端**（>768px）：侧边栏固定，卡片网格多列显示
- **移动端**（≤768px）：侧边栏可折叠，卡片单列显示

## 技术栈

- **HTML5** - 语义化标签
- **CSS3** - 现代化样式，CSS Grid, Flexbox
- **JavaScript (ES6+)** - 原生 JavaScript，无框架依赖
- **Font Awesome 6** - 图标库
- **Fetch API** - HTTP 请求

## 开发说明

### 文件结构
```
web/static/
├── index.html      # 主页面
├── css/
│   └── style.css   # 样式文件
└── js/
    └── app.js      # 应用逻辑
```

### 添加新功能

1. **添加新的 API 调用**
   ```javascript
   async function myNewFunction() {
       try {
           const data = await apiRequest('/my-endpoint');
           // 处理数据
       } catch (error) {
           showToast('操作失败: ' + error.message, 'error');
       }
   }
   ```

2. **添加新的 UI 组件**
   - 在 `index.html` 中添加 HTML 结构
   - 在 `style.css` 中添加样式
   - 在 `app.js` 中添加交互逻辑

3. **添加新的模态框**
   ```javascript
   showModal('标题', `
       <div class="form-group">
           <label>字段名</label>
           <input type="text" id="my-input">
       </div>
   `, async () => {
       const value = document.getElementById('my-input').value;
       // 处理提交
   });
   ```

## 常见问题

### Q: 为什么看不到自定义类型和接口？
A: 请先在侧边栏底部选择一个应用。

### Q: 如何删除应用？
A: 点击应用卡片上的"删除"按钮。注意：这会删除所有相关数据。

### Q: 创建类型时如何引用其他类型？
A: 当前版本暂不支持类型引用，将在后续版本中添加。

### Q: 如何测试接口？
A: 接口测试功能正在开发中。

## 未来计划

- [ ] 接口测试功能
- [ ] 自定义类型引用支持
- [ ] 批量操作
- [ ] 导入/导出配置
- [ ] 搜索和过滤功能
- [ ] 接口编辑功能完善
- [ ] 暗色主题
- [ ] 多语言支持

## 反馈和建议

如有问题或建议，请提交 Issue。
